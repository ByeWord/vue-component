{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\slides\\src\\slides.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\slides\\src\\slides.vue","mtime":1580794280479},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJXU2xpZGVzIiwKICBwcm9wczogewogICAgc2VsZWN0ZWQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgYXV0b1BsYXk6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRvdHNDb3VudDogMCwKICAgICAgbGFzdFNlbGVjdGVkSW5kZXg6IHVuZGVmaW5lZCwKICAgICAgdGltZUlkOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4oKTsKICAgIGNvbnNvbGUubG9nKHRoaXMuJGNoaWxkcmVuKTsKICAgIHRoaXMuYXV0b1BsYXkgJiYgdGhpcy5wbGF5QXV0b21hdGljYWxseSgpOwogICAgdGhpcy5kb3RzQ291bnQgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7CiAgfSwKICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgdGhpcy51cGRhdGVDaGlsZHJlbigpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG5hbWVzOiBmdW5jdGlvbiBuYW1lcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNoaWxkcmVuLm1hcChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICByZXR1cm4gY2hpbGQubmFtZTsKICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0ZWRJbmRleDogZnVuY3Rpb24gc2VsZWN0ZWRJbmRleCgpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5uYW1lcy5pbmRleE9mKHRoaXMuc2VsZWN0ZWQpOwogICAgICByZXR1cm4gaW5kZXggPT09IC0xID8gMCA6IGluZGV4OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25Ub3VjaFN0YXJ0OiBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkgewogICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpIHJldHVybjsKICAgICAgdGhpcy5wYXVzZSgpOwogICAgfSwKICAgIG9uVG91Y2hNb3ZlOiBmdW5jdGlvbiBvblRvdWNoTW92ZShlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdvblRvdWNoTW92ZScpOwogICAgfSwKICAgIG9uVG91Y2hFbmQ6IGZ1bmN0aW9uIG9uVG91Y2hFbmQoZSkgewogICAgICB2YXIgZW5kVG91Y2ggPSBlLmNoYW5nZWRUb3VjaGVzWzBdOwogICAgICBjb25zb2xlLmxvZyhlbmRUb3VjaCk7CiAgICB9LAogICAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIHVwZGF0ZUNoaWxkcmVuKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8g5qC45b+D5pu05paw5pa55rOVCiAgICAgIHZhciBzZWxlY3RlZCA9IHRoaXMuZ2V0U2VsZWN0ZWQoKTsgLy8g6I635Y+W5pu05paw5ZCO55qEc2VsZWN0ZWQKCiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgLy8gVnVl55qE5byC5q2l5pu05paw77yM5a+86Ie0ZG9t5pON5L2ccmV2ZXJzZeexu+abtOaWsOS4jeWPiuaXtgogICAgICAgIHZhciByZXZlcnNlID0gX3RoaXMuc2VsZWN0ZWRJbmRleCA8PSBfdGhpcy5sYXN0U2VsZWN0ZWRJbmRleDsKCiAgICAgICAgaWYgKF90aGlzLnRpbWVJZCkgewogICAgICAgICAgaWYgKF90aGlzLmxhc3RTZWxlY3RlZEluZGV4ID09PSBfdGhpcy4kY2hpbGRyZW4ubGVuZ3RoIC0gMSkgewogICAgICAgICAgICByZXZlcnNlID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2bS5yZXZlcnNlID0gcmV2ZXJzZTsKCiAgICAgICAgX3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZtLnNlbGVjdGVkID0gc2VsZWN0ZWQ7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldFNlbGVjdGVkOiBmdW5jdGlvbiBnZXRTZWxlY3RlZCgpIHsKICAgICAgdmFyIGZpcnN0ID0gdGhpcy4kY2hpbGRyZW5bMF07CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkIHx8IGZpcnN0Lm5hbWU7CiAgICB9LAogICAgb25Nb3VzZUxlYXZlOiBmdW5jdGlvbiBvbk1vdXNlTGVhdmUoKSB7CiAgICAgIGlmICghdGhpcy50aW1lSWQpIHsKICAgICAgICAvL+S4uuS6humYsuatonRpbWVJZOiiq+mHjeWkjeaSreaUvgogICAgICAgIHRoaXMucGxheUF1dG9tYXRpY2FsbHkoKTsKICAgICAgfQogICAgfSwKICAgIHBsYXlBdXRvbWF0aWNhbGx5OiBmdW5jdGlvbiBwbGF5QXV0b21hdGljYWxseSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgcGxheSA9IGZ1bmN0aW9uIHBsYXkoKSB7CiAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMyLm5hbWVzLmluZGV4T2YoX3RoaXMyLmdldFNlbGVjdGVkKCkpOwoKICAgICAgICBpbmRleCA9ICsraW5kZXggJSBfdGhpczIubmFtZXMubGVuZ3RoOyAvLyDmraPlkJEKCiAgICAgICAgX3RoaXMyLnN3aXRjaFRvKGluZGV4KTsKCiAgICAgICAgX3RoaXMyLnRpbWVJZCA9IHNldFRpbWVvdXQocGxheSwgNTAwMCk7CiAgICAgIH07CgogICAgICBwbGF5KCk7CiAgICB9LAogICAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkgewogICAgICB0aGlzLnRpbWVJZCAmJiB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZUlkKTsKICAgICAgdGhpcy50aW1lSWQgPSBudWxsOwogICAgfSwKICAgIHN3aXRjaFRvOiBmdW5jdGlvbiBzd2l0Y2hUbyhpbmRleCkgewogICAgICB0aGlzLmxhc3RTZWxlY3RlZEluZGV4ID0gdGhpcy5zZWxlY3RlZEluZGV4OwogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0ZWQnLCB0aGlzLm5hbWVzW2luZGV4XSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["slides.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"w-slides\">\r\n        <div\r\n                class=\"w-slides-window\"\r\n                ref=\"window\"\r\n                @touchstart=\"onTouchStart\"\r\n                @touchmove=\"onTouchMove\"\r\n                @touchend=\"onTouchEnd\"\r\n        >\r\n            <div class=\"w-slides-wrapper\">\r\n                <slot></slot>\r\n            </div>\r\n        </div>\r\n        <ul class=\"w-slides-dots\">\r\n            <li class=\"w-slides-dot\" :class=\"{active:selectedIndex===(n-1)}\" v-for=\"n in dotsCount\" :key=\"n\"\r\n                @click=\"switchTo(n-1)\"\r\n                @mouseenter=\"pause\"\r\n                @mouseleave=\"onMouseLeave\"\r\n            >\r\n                {{n}}\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WSlides\",\r\n    props: {\r\n      selected: {\r\n        type: String,\r\n      },\r\n      autoPlay: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        dotsCount: 0,\r\n        lastSelectedIndex: undefined,\r\n        timeId: null\r\n      }\r\n    },\r\n    mounted() {\r\n      this.updateChildren();\r\n      console.log(this.$children)\r\n      this.autoPlay && this.playAutomatically();\r\n      this.dotsCount = this.$children.length;\r\n    },\r\n    updated() {\r\n      this.updateChildren();\r\n    },\r\n    computed: {\r\n      names() {\r\n        return this.$children.map(child => child.name);\r\n      },\r\n      selectedIndex() {\r\n        let index = this.names.indexOf(this.selected);\r\n        return index === -1 ? 0 : index;\r\n      }\r\n    },\r\n    methods: {\r\n      onTouchStart(e) {\r\n        if (e.touches.length > 1) return;\r\n        this.pause();\r\n      },\r\n      onTouchMove(e) {\r\n        console.log('onTouchMove')\r\n      },\r\n      onTouchEnd(e) {\r\n        let endTouch = e.changedTouches[0];\r\n        console.log(endTouch)\r\n      },\r\n      updateChildren() { // 核心更新方法\r\n        let selected = this.getSelected(); // 获取更新后的selected\r\n        this.$children.forEach(vm => {\r\n          // Vue的异步更新，导致dom操作reverse类更新不及时\r\n          let reverse = this.selectedIndex <= this.lastSelectedIndex;\r\n          if (this.timeId) {\r\n            if (this.lastSelectedIndex === this.$children.length - 1) {\r\n              reverse = false;\r\n            }\r\n          }\r\n          vm.reverse = reverse;\r\n          this.$nextTick(() => {\r\n            vm.selected = selected;\r\n          });\r\n        });\r\n      },\r\n      getSelected() {\r\n        let first = this.$children[0];\r\n        return this.selected || first.name;\r\n      },\r\n      onMouseLeave() {\r\n        if (!this.timeId) { //为了防止timeId被重复播放\r\n          this.playAutomatically();\r\n        }\r\n      },\r\n      playAutomatically() {\r\n        let play = () => {\r\n          let index = this.names.indexOf(this.getSelected());\r\n          index = (++index) % this.names.length; // 正向\r\n          this.switchTo(index);\r\n          this.timeId = setTimeout(play, 5000)\r\n        };\r\n        play();\r\n      },\r\n      pause() {\r\n        this.timeId && window.clearTimeout(this.timeId);\r\n        this.timeId = null;\r\n      },\r\n      switchTo(index) {\r\n        this.lastSelectedIndex = this.selectedIndex;\r\n        this.$emit('update:selected', this.names[index]);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-slides {\r\n        border: 1px solid black;\r\n        position: relative;\r\n        &-window {\r\n            overflow: hidden;\r\n        }\r\n        &-wrapper {\r\n            position: relative;\r\n        }\r\n        &-dots {\r\n            padding: 0;\r\n            margin: 0;\r\n            list-style: none;\r\n            position: absolute;\r\n            border-bottom: 0;\r\n            left: 50%;\r\n            transform: translateX(-50%);\r\n        }\r\n        &-dot {\r\n            height: 16px;\r\n            width: 16px;\r\n            font-size: 12px;\r\n            cursor: pointer;\r\n            display: inline-block;\r\n            line-height: 16px;\r\n            text-align: center;\r\n            border-radius: 50%;\r\n            background-color: #cccccc;\r\n            transition: background-color 0.8s ease-in-out;\r\n            &.active {\r\n                background-color: crimson;\r\n            }\r\n            &:hover {\r\n                background-color: crimson;\r\n            }\r\n            &:not(:last-child) {\r\n                margin-right: 12px;\r\n            }\r\n        }\r\n    }\r\n</style>"],"sourceRoot":"src/components/slides/src"}]}