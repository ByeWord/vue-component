{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\sticky\\src\\sticky.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\sticky\\src\\sticky.vue","mtime":1580811490772},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJXU3RpY2t5IiwKICBwcm9wczogewogICAgZGlzdGFuY2U6IHsKICAgICAgdHlwZTogTnVtYmVyIHwgU3RyaW5nLAogICAgICBkZWZhdWx0OiAwCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RpY2t5OiBmYWxzZSwKICAgICAgbGVmdDogdW5kZWZpbmVkLAogICAgICBoZWlnaHQ6IHVuZGVmaW5lZCwKICAgICAgd2lkdGg6IHVuZGVmaW5lZCwKICAgICAgdG9wOiB1bmRlZmluZWQKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAvLzEuCiAgICAvLzIuIHN0aWNreUVsIHBvc2l0aW9uOmZpeGVk5a6a5L2N5ZCO77yM6aG16Z2i5Yia5aW95om/6L295YaF5a655a+86Ie05rua5Yqo5p2h5raI5aSxCgogICAgLyoqCiAgICAgKiDop6PlhrPmgJ3ot6/vvJpodG1s57uT5p6EIHdyYXBwZXItPnN0aWNreQogICAgICogc3RpY2t55Y+Y5oiQZml4ZWTlkI7orr7nva53cmFwcGVy55qE6auY5bqm5Li65Y6f5YWI55qE6auY5bqmCiAgICAgKi8KICAgIC8vMy4g5aaC5p6c5Yqg6L2955qE5piv5Zu+54mH6LWE5rqQ77yM6I635Y+W5Yiw55qEd3JhcHBlcumrmOW6puS4jeWHhuehrgoKICAgIC8qKgogICAgICrnm5HlkKxzdGlja3ktPnRydWXlj5jljJbml7blho3ojrflj5bpq5jluqYKICAgICAqLwogICAgLy80LuWuveW6puWSjOS9jee9rueUseS6jnBvc2l0aW9u77yaZml4ZWTlkI7lj5jlvpfkuI3lh4bnoa4KCiAgICAvKioKICAgICAqIOino+WGs+aAnei3r+WQjOS4igogICAgICovCiAgICB0aGlzLnNjcm9sbEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0b3AgPSBfdGhpcy5vZmZzZXRUb3AoKTsKCiAgICAgIGNvbnNvbGUubG9nKHRvcCk7CiAgICAgIGNvbnNvbGUubG9nKE51bWJlcihfdGhpcy5kaXN0YW5jZSkpOwoKICAgICAgaWYgKHRvcCA8IE51bWJlcihfdGhpcy5kaXN0YW5jZSkpIHsKICAgICAgICB2YXIgX3RoaXMkJHJlZnMkd3JhcHBlciRnID0gX3RoaXMuJHJlZnMud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwKICAgICAgICAgICAgbGVmdCA9IF90aGlzJCRyZWZzJHdyYXBwZXIkZy5sZWZ0LAogICAgICAgICAgICB3aWR0aCA9IF90aGlzJCRyZWZzJHdyYXBwZXIkZy53aWR0aCwKICAgICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkJHJlZnMkd3JhcHBlciRnLmhlaWdodDsKCiAgICAgICAgX3RoaXMubGVmdCA9IGxlZnQgKyAncHgnOwogICAgICAgIF90aGlzLmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICAgICAgX3RoaXMud2lkdGggPSB3aWR0aCArICdweCc7CiAgICAgICAgX3RoaXMudG9wID0gX3RoaXMuZGlzdGFuY2UgKyAncHgnOwogICAgICAgIF90aGlzLnN0aWNreSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ+S4jeWQuOmhtuS6hicpOwogICAgICAgIF90aGlzLmxlZnQgPSB1bmRlZmluZWQ7CiAgICAgICAgX3RoaXMuaGVpZ2h0ID0gdW5kZWZpbmVkOwogICAgICAgIF90aGlzLndpZHRoID0gdW5kZWZpbmVkOwogICAgICAgIF90aGlzLnRvcCA9IHVuZGVmaW5lZDsKICAgICAgICBfdGhpcy5zdGlja3kgPSBmYWxzZTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9mZnNldFRvcDogZnVuY3Rpb24gb2Zmc2V0VG9wKCkgewogICAgICAvLyB0b3DnmoTlgLzmnInmraPotJ8KICAgICAgdmFyIF90aGlzJCRyZWZzJHdyYXBwZXIkZzIgPSB0aGlzLiRyZWZzLndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgICB0b3AgPSBfdGhpcyQkcmVmcyR3cmFwcGVyJGcyLnRvcDsKCiAgICAgIHJldHVybiB0b3A7CiAgICB9CiAgfSwKICAvL+ino+mZpOeDreabtOaWsOWJr+S9nOeUqAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTsKICB9Cn07"},{"version":3,"sources":["sticky.vue"],"names":[],"mappings":";;;;;;;;;AASA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MAAA,GAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,IAAA,EAAA,SAFA;AAGA,MAAA,MAAA,EAAA,SAHA;AAIA,MAAA,KAAA,EAAA,SAJA;AAKA,MAAA,GAAA,EAAA;AALA,KAAA;AAOA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA;AACA;;AACA;;;;AAIA;;AACA;;;AAGA;;AACA;;;AAGA,SAAA,aAAA,GAAA,YAAA;AACA,UAAA,GAAA,GAAA,KAAA,CAAA,SAAA,EAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA;;AACA,UAAA,GAAA,GAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,EAAA;AAAA,oCACA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA,qBAAA,EADA;AAAA,YACA,IADA,yBACA,IADA;AAAA,YACA,KADA,yBACA,KADA;AAAA,YACA,MADA,yBACA,MADA;;AAEA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,MAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,KAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,GAAA,GAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,IAAA;AACA,OAPA,MAOA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,SAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,SAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,SAAA;AACA,QAAA,KAAA,CAAA,GAAA,GAAA,SAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,KAAA;AACA;AACA,KAnBA;;AAoBA,IAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,KAAA,aAAA;AACA,GArDA;AAsDA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA;AADA,mCAEA,KAAA,KAAA,CAAA,OAAA,CAAA,qBAAA,EAFA;AAAA,UAEA,GAFA,0BAEA,GAFA;;AAGA,aAAA,GAAA;AACA;AALA,GAtDA;AA6DA;AACA,EAAA,aA9DA,2BA8DA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,EAAA,KAAA,aAAA;AACA;AAhEA,CAAA","sourcesContent":["<template>\r\n    <div class=\"w-sticky-wrapper\" ref=\"wrapper\" :style=\"{height}\">\r\n        <div class=\"w-sticky\" ref=\"stickyEl\" :class=\"{sticky}\" :style=\"{left,width,top}\">\r\n            <slot></slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WSticky\",\r\n    props: {\r\n      distance: {\r\n        type: Number | String,\r\n        default: 0\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        sticky: false,\r\n        left: undefined,\r\n        height: undefined,\r\n        width: undefined,\r\n        top:undefined\r\n      }\r\n    },\r\n    mounted() {\r\n      //1.\r\n      //2. stickyEl position:fixed定位后，页面刚好承载内容导致滚动条消失\r\n      /**\r\n       * 解决思路：html结构 wrapper->sticky\r\n       * sticky变成fixed后设置wrapper的高度为原先的高度\r\n       */\r\n      //3. 如果加载的是图片资源，获取到的wrapper高度不准确\r\n      /**\r\n       *监听sticky->true变化时再获取高度\r\n       */\r\n        //4.宽度和位置由于position：fixed后变得不准确\r\n      /**\r\n       * 解决思路同上\r\n       */\r\n      this.scrollHandler = () => {\r\n        let top = this.offsetTop();\r\n        console.log(top)\r\n        console.log(Number(this.distance))\r\n        if (top < Number(this.distance)) {\r\n          let {left, width, height} = this.$refs.wrapper.getBoundingClientRect();\r\n          this.left = left + 'px';\r\n          this.height = height + 'px';\r\n          this.width = width + 'px';\r\n          this.top = this.distance + 'px';\r\n          this.sticky = true;\r\n        } else {\r\n          console.log('不吸顶了')\r\n          this.left = undefined;\r\n          this.height = undefined;\r\n          this.width = undefined;\r\n          this.top = undefined;\r\n          this.sticky = false;\r\n        }\r\n      };\r\n      window.addEventListener('scroll', this.scrollHandler);\r\n    },\r\n    methods: {\r\n      offsetTop() {\r\n        // top的值有正负\r\n        let {top} = this.$refs.wrapper.getBoundingClientRect();\r\n        return top;\r\n      }\r\n    },\r\n    //解除热更新副作用\r\n    beforeDestroy(){\r\n        window.removeEventListener('scroll',this.scrollHandler)\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-sticky {\r\n        &.sticky {\r\n            position: fixed;\r\n        }\r\n    }\r\n</style>"],"sourceRoot":"src/components/sticky/src"}]}