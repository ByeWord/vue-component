{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\sticky\\src\\sticky.vue?vue&type=style&index=0&id=ddcb990c&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\sticky\\src\\sticky.vue","mtime":1580811490772},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnctc3RpY2t5IHsKICAgICYuc3RpY2t5IHsKICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB9Cn0K"},{"version":3,"sources":["sticky.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA","file":"sticky.vue","sourceRoot":"src/components/sticky/src","sourcesContent":["<template>\r\n    <div class=\"w-sticky-wrapper\" ref=\"wrapper\" :style=\"{height}\">\r\n        <div class=\"w-sticky\" ref=\"stickyEl\" :class=\"{sticky}\" :style=\"{left,width,top}\">\r\n            <slot></slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WSticky\",\r\n    props: {\r\n      distance: {\r\n        type: Number | String,\r\n        default: 0\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        sticky: false,\r\n        left: undefined,\r\n        height: undefined,\r\n        width: undefined,\r\n        top:undefined\r\n      }\r\n    },\r\n    mounted() {\r\n      //1.\r\n      //2. stickyEl position:fixed定位后，页面刚好承载内容导致滚动条消失\r\n      /**\r\n       * 解决思路：html结构 wrapper->sticky\r\n       * sticky变成fixed后设置wrapper的高度为原先的高度\r\n       */\r\n      //3. 如果加载的是图片资源，获取到的wrapper高度不准确\r\n      /**\r\n       *监听sticky->true变化时再获取高度\r\n       */\r\n        //4.宽度和位置由于position：fixed后变得不准确\r\n      /**\r\n       * 解决思路同上\r\n       */\r\n      this.scrollHandler = () => {\r\n        let top = this.offsetTop();\r\n        console.log(top)\r\n        console.log(Number(this.distance))\r\n        if (top < Number(this.distance)) {\r\n          let {left, width, height} = this.$refs.wrapper.getBoundingClientRect();\r\n          this.left = left + 'px';\r\n          this.height = height + 'px';\r\n          this.width = width + 'px';\r\n          this.top = this.distance + 'px';\r\n          this.sticky = true;\r\n        } else {\r\n          console.log('不吸顶了')\r\n          this.left = undefined;\r\n          this.height = undefined;\r\n          this.width = undefined;\r\n          this.top = undefined;\r\n          this.sticky = false;\r\n        }\r\n      };\r\n      window.addEventListener('scroll', this.scrollHandler);\r\n    },\r\n    methods: {\r\n      offsetTop() {\r\n        // top的值有正负\r\n        let {top} = this.$refs.wrapper.getBoundingClientRect();\r\n        return top;\r\n      }\r\n    },\r\n    //解除热更新副作用\r\n    beforeDestroy(){\r\n        window.removeEventListener('scroll',this.scrollHandler)\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-sticky {\r\n        &.sticky {\r\n            position: fixed;\r\n        }\r\n    }\r\n</style>"]}]}