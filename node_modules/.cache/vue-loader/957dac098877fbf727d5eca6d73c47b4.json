{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\tableFixable\\table.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\tableFixable\\table.vue","mtime":1579702715707},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidy10YWJsZSIsCiAgcHJvcHM6IHsKICAgIGRhdGFTb3VyY2U6IHsvLwogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICBjb2x1bW5zOiB7IC8vIOihqOWktOeahOaVsOaNrgogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgbnVtYmVyVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgYm9yZGVyZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHNlbGVjdGVkSXRlbXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9LAogICAgaW5kZXRlcm1pbmF0ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIG9yZGVyQnk6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VsZWN0ZWRJdGVtcygpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRJdGVtcy5sZW5ndGggPT09IHRoaXMuZGF0YVNvdXJjZS5sZW5ndGgpIHsKCiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCA9PT0gMCkgewoKICAgICAgfSBlbHNlIHsKCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBhcmRBbGxJdGVtc1NlbGVjdGVkKCkgewogICAgICBsZXQgc29ydGVkRGF0YSA9IHRoaXMuZGF0YVNvdXJjZS5tYXAoZHMgPT4gZHMuaWQpLnNvcnQoKTsKICAgICAgbGV0IHNvcnRlZFNlbERhdGEgPSB0aGlzLnNlbGVjdGVkSXRlbXMubWFwKHNpID0+IHNpLmlkKS5zb3J0KCk7CiAgICAgIGlmIChzb3J0ZWREYXRhLmxlbmd0aCAhPT0gc29ydGVkU2VsRGF0YS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGVxdWFsID0gdHJ1ZTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWREYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHNvcnRlZERhdGFbaV0uaWQgIT09IHNvcnRlZFNlbERhdGFbaV0uaWQpIHsKICAgICAgICAgIGVxdWFsID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGVxdWFsOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2hlY2soaXRlbSwgaW5kZXgsIGV2ZW50KSB7CiAgICAgIGxldCBzZWxlY3RlZCA9IGV2ZW50LnRhcmdldC5jaGVja2VkOwogICAgICBsZXQgY29weSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZEl0ZW1zKSk7CiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIGNvcHkucHVzaChpdGVtKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb3B5ID0gY29weS5maWx0ZXIoYSA9PiBhLmlkICE9PSBpdGVtLmlkKTsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2VsZWN0ZWRJdGVtcycsIGNvcHkpOwogICAgfSwKICAgIG9uU2VsZWN0QWxsKGUpIHsKICAgICAgbGV0IHNlbGVjdGVkID0gZS50YXJnZXQuY2hlY2tlZDsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNlbGVjdGVkSXRlbXMnLCBzZWxlY3RlZCA/IHRoaXMuZGF0YVNvdXJjZSA6IFtdKQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCB0YWJsZTIgPSB0aGlzLiRyZWZzLnRhYmxlLmNsb25lTm9kZSh0cnVlKTsKICAgIAogICAgQXJyYXkuZnJvbSh0YWJsZTIuY2hpbGRyZW4pLm1hcChub2RlID0+IHsKICAgICAgaWYgKG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAndGhlYWQnKSB7CiAgICAgICAgbm9kZS5yZW1vdmUoKTsKICAgICAgfQogICAgfSk7CiAgICB0aGlzLiRyZWZzLndyYXBwZXIuYXBwZW5kQ2hpbGQodGFibGUyKTsKICB9Cn0K"},{"version":3,"sources":["table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"table.vue","sourceRoot":"src/components/tableFixable","sourcesContent":["<template>\r\n    <div class=\"w-table-wrapper\" ref=\"wrapper\">\r\n        <div class=\"w-table-header\">\r\n\r\n        </div>\r\n        <table class=\"w-table\" :class=\"{bordered}\" ref=\"table\">\r\n            <thead class=\"w-table-head\">\r\n            <tr>\r\n                <th>\r\n                    <input\r\n                            type=\"checkbox\"\r\n                            @change=\"onSelectAll\"\r\n                            :checked=\"ardAllItemsSelected\"\r\n                            ref=\"allChecked\"\r\n                    />\r\n                </th>\r\n                <th v-if=\"numberVisible\">#</th>\r\n                <th v-for=\"column in columns\" :key=\"column.field\">\r\n                    {{column.text}}<span v-if=\"column.field in orderBy\" class=\"w-table-sorter\">↑↓</span>\r\n                </th>\r\n            </tr>\r\n            </thead>\r\n            <tbody class=\"w-table-body\">\r\n            <tr v-for=\"(item,idx) in dataSource\" :key=\"item.id\">\r\n                <td>\r\n                    <input type=\"checkbox\"\r\n                           @change=\"handleCheck(item,idx,$event)\"\r\n                           :checked=\"selectedItems.filter(a=>a.id === item.id).length>0\"\r\n                    />\r\n                </td>\r\n                <td v-if=\"numberVisible\">{{idx+1}}</td>\r\n                <template v-for=\"column in columns\">\r\n                    <td :key=\"column.field\">{{item[column.field]}}</td>\r\n                </template>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"w-table\",\r\n    props: {\r\n      dataSource: {//\r\n        type: Array,\r\n        default: () => []\r\n      },\r\n      columns: { // 表头的数据\r\n        type: Array,\r\n        default: () => [],\r\n        required: true\r\n      },\r\n      numberVisible: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      bordered: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      selectedItems: {\r\n        type: Array,\r\n        default: () => []\r\n      },\r\n      indeterminate: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      orderBy: {\r\n        type: Object,\r\n        default: () => ({})\r\n      }\r\n    },\r\n    watch: {\r\n      selectedItems() {\r\n        if (this.selectedItems.length === this.dataSource.length) {\r\n\r\n        } else if (this.selectedItems.length === 0) {\r\n\r\n        } else {\r\n\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      ardAllItemsSelected() {\r\n        let sortedData = this.dataSource.map(ds => ds.id).sort();\r\n        let sortedSelData = this.selectedItems.map(si => si.id).sort();\r\n        if (sortedData.length !== sortedSelData.length) {\r\n          return false;\r\n        }\r\n        let equal = true;\r\n        for (let i = 0; i < sortedData.length; i++) {\r\n          if (sortedData[i].id !== sortedSelData[i].id) {\r\n            equal = false;\r\n            break;\r\n          }\r\n        }\r\n        return equal;\r\n      }\r\n    },\r\n    methods: {\r\n      handleCheck(item, index, event) {\r\n        let selected = event.target.checked;\r\n        let copy = JSON.parse(JSON.stringify(this.selectedItems));\r\n        if (selected) {\r\n          copy.push(item);\r\n        } else {\r\n          copy = copy.filter(a => a.id !== item.id);\r\n        }\r\n        this.$emit('update:selectedItems', copy);\r\n      },\r\n      onSelectAll(e) {\r\n        let selected = e.target.checked;\r\n        this.$emit('update:selectedItems', selected ? this.dataSource : [])\r\n      }\r\n    },\r\n    mounted() {\r\n      let table2 = this.$refs.table.cloneNode(true);\r\n      \r\n      Array.from(table2.children).map(node => {\r\n        if (node.tagName.toLowerCase() !== 'thead') {\r\n          node.remove();\r\n        }\r\n      });\r\n      this.$refs.wrapper.appendChild(table2);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-table {\r\n        width: 100%;\r\n        border-collapse: collapse;\r\n        border-spacing: 0;\r\n        &.bordered {\r\n            border: 1px solid #ccc;\r\n            th, td {\r\n                border: 1px solid #ccc;\r\n            }\r\n        }\r\n        &-head {\r\n\r\n        }\r\n        &-body {\r\n\r\n        }\r\n        th, td {\r\n            padding: 8px 8px;\r\n        }\r\n        th {\r\n            text-align: left;\r\n        }\r\n        tr {\r\n            border-bottom: 1px solid #ccc;\r\n        }\r\n        tbody {\r\n            tr:nth-child(odd) {\r\n                background-color: #fafafa;;\r\n            }\r\n            tr:nth-child(even):hover {\r\n                background-color: #9d9f;\r\n            }\r\n        }\r\n    }\r\n</style>"]}]}