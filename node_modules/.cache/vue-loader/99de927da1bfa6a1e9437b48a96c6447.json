{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\sticky\\src\\sticky.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\sticky\\src\\sticky.vue","mtime":1580811490772},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiV1N0aWNreSIsCiAgcHJvcHM6IHsKICAgIGRpc3RhbmNlOiB7CiAgICAgIHR5cGU6IE51bWJlciB8IFN0cmluZywKICAgICAgZGVmYXVsdDogMAogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0aWNreTogZmFsc2UsCiAgICAgIGxlZnQ6IHVuZGVmaW5lZCwKICAgICAgaGVpZ2h0OiB1bmRlZmluZWQsCiAgICAgIHdpZHRoOiB1bmRlZmluZWQsCiAgICAgIHRvcDp1bmRlZmluZWQKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLzEuCiAgICAvLzIuIHN0aWNreUVsIHBvc2l0aW9uOmZpeGVk5a6a5L2N5ZCO77yM6aG16Z2i5Yia5aW95om/6L295YaF5a655a+86Ie05rua5Yqo5p2h5raI5aSxCiAgICAvKioKICAgICAqIOino+WGs+aAnei3r++8mmh0bWznu5PmnoQgd3JhcHBlci0+c3RpY2t5CiAgICAgKiBzdGlja3nlj5jmiJBmaXhlZOWQjuiuvue9rndyYXBwZXLnmoTpq5jluqbkuLrljp/lhYjnmoTpq5jluqYKICAgICAqLwogICAgLy8zLiDlpoLmnpzliqDovb3nmoTmmK/lm77niYfotYTmupDvvIzojrflj5bliLDnmoR3cmFwcGVy6auY5bqm5LiN5YeG56GuCiAgICAvKioKICAgICAq55uR5ZCsc3RpY2t5LT50cnVl5Y+Y5YyW5pe25YaN6I635Y+W6auY5bqmCiAgICAgKi8KICAgICAgLy80LuWuveW6puWSjOS9jee9rueUseS6jnBvc2l0aW9u77yaZml4ZWTlkI7lj5jlvpfkuI3lh4bnoa4KICAgIC8qKgogICAgICog6Kej5Yaz5oCd6Lev5ZCM5LiKCiAgICAgKi8KICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9ICgpID0+IHsKICAgICAgbGV0IHRvcCA9IHRoaXMub2Zmc2V0VG9wKCk7CiAgICAgIGNvbnNvbGUubG9nKHRvcCkKICAgICAgY29uc29sZS5sb2coTnVtYmVyKHRoaXMuZGlzdGFuY2UpKQogICAgICBpZiAodG9wIDwgTnVtYmVyKHRoaXMuZGlzdGFuY2UpKSB7CiAgICAgICAgbGV0IHtsZWZ0LCB3aWR0aCwgaGVpZ2h0fSA9IHRoaXMuJHJlZnMud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0ICsgJ3B4JzsKICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodCArICdweCc7CiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoICsgJ3B4JzsKICAgICAgICB0aGlzLnRvcCA9IHRoaXMuZGlzdGFuY2UgKyAncHgnOwogICAgICAgIHRoaXMuc3RpY2t5ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygn5LiN5ZC46aG25LqGJykKICAgICAgICB0aGlzLmxlZnQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5oZWlnaHQgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy53aWR0aCA9IHVuZGVmaW5lZDsKICAgICAgICB0aGlzLnRvcCA9IHVuZGVmaW5lZDsKICAgICAgICB0aGlzLnN0aWNreSA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvZmZzZXRUb3AoKSB7CiAgICAgIC8vIHRvcOeahOWAvOacieato+i0nwogICAgICBsZXQge3RvcH0gPSB0aGlzLiRyZWZzLndyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHJldHVybiB0b3A7CiAgICB9CiAgfSwKICAvL+ino+mZpOeDreabtOaWsOWJr+S9nOeUqAogIGJlZm9yZURlc3Ryb3koKXsKICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsdGhpcy5zY3JvbGxIYW5kbGVyKQogIH0KfQo="},{"version":3,"sources":["sticky.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sticky.vue","sourceRoot":"src/components/sticky/src","sourcesContent":["<template>\r\n    <div class=\"w-sticky-wrapper\" ref=\"wrapper\" :style=\"{height}\">\r\n        <div class=\"w-sticky\" ref=\"stickyEl\" :class=\"{sticky}\" :style=\"{left,width,top}\">\r\n            <slot></slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WSticky\",\r\n    props: {\r\n      distance: {\r\n        type: Number | String,\r\n        default: 0\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        sticky: false,\r\n        left: undefined,\r\n        height: undefined,\r\n        width: undefined,\r\n        top:undefined\r\n      }\r\n    },\r\n    mounted() {\r\n      //1.\r\n      //2. stickyEl position:fixed定位后，页面刚好承载内容导致滚动条消失\r\n      /**\r\n       * 解决思路：html结构 wrapper->sticky\r\n       * sticky变成fixed后设置wrapper的高度为原先的高度\r\n       */\r\n      //3. 如果加载的是图片资源，获取到的wrapper高度不准确\r\n      /**\r\n       *监听sticky->true变化时再获取高度\r\n       */\r\n        //4.宽度和位置由于position：fixed后变得不准确\r\n      /**\r\n       * 解决思路同上\r\n       */\r\n      this.scrollHandler = () => {\r\n        let top = this.offsetTop();\r\n        console.log(top)\r\n        console.log(Number(this.distance))\r\n        if (top < Number(this.distance)) {\r\n          let {left, width, height} = this.$refs.wrapper.getBoundingClientRect();\r\n          this.left = left + 'px';\r\n          this.height = height + 'px';\r\n          this.width = width + 'px';\r\n          this.top = this.distance + 'px';\r\n          this.sticky = true;\r\n        } else {\r\n          console.log('不吸顶了')\r\n          this.left = undefined;\r\n          this.height = undefined;\r\n          this.width = undefined;\r\n          this.top = undefined;\r\n          this.sticky = false;\r\n        }\r\n      };\r\n      window.addEventListener('scroll', this.scrollHandler);\r\n    },\r\n    methods: {\r\n      offsetTop() {\r\n        // top的值有正负\r\n        let {top} = this.$refs.wrapper.getBoundingClientRect();\r\n        return top;\r\n      }\r\n    },\r\n    //解除热更新副作用\r\n    beforeDestroy(){\r\n        window.removeEventListener('scroll',this.scrollHandler)\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-sticky {\r\n        &.sticky {\r\n            position: fixed;\r\n        }\r\n    }\r\n</style>"]}]}