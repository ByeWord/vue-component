{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\table\\temp\\temp-table.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\table\\temp\\temp-table.vue","mtime":1581498338139},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUYWJsZVJlbmRlciBmcm9tICcuL3RhYmxlLXJlbmRlcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInRlbXAtdGFibGUiLAogIGNvbXBvbmVudHM6IHsKICAgIFRhYmxlUmVuZGVyCiAgfSwKICBwcm9wczogewogICAgLyoqCiAgICAgKiBmb3JtYXR0ZXI6CiAgICAgKiB7CiAgICAgKiAgICAga2V577yMCiAgICAgKiAgICAgdGl0bGUKICAgICAqIH0KICAgICAqLwogICAgY29sdW1uczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBTdHJpbmcgfCBOdW1iZXIKICAgIH0sCiAgICBib3JkZXJlZDogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29sV2lkdGg6IHVuZGVmaW5lZCwKICAgICAgZml4ZWRIZWFkZXJQYWRkaW5nOiB1bmRlZmluZWQsCiAgICAgIGhlYWRlckhlaWdodDogdW5kZWZpbmVkCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdEJvZHlTdHlsZSgpIHsKICAgICAgaWYgKHRoaXMuaGVpZ2h0KSB7CiAgICAgICAgcmV0dXJuIHtoZWlnaHQ6IGAke3RoaXMuaGVpZ2h0LXRoaXMuaGVhZGVySGVpZ2h0IH1weGB9CiAgICAgIH0KICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIHRIZWFkZXJTdHlsZSgpIHsKICAgICAgaWYgKHRoaXMuaGVpZ2h0ICYmIHRoaXMuZml4ZWRIZWFkZXJQYWRkaW5nID4gMCkgewogICAgICAgIHJldHVybiB7cGFkZGluZ1JpZ2h0OiB0aGlzLmZpeGVkSGVhZGVyUGFkZGluZyArICdweCd9CiAgICAgIH0KICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIHRCb2R5Q2xhc3MoKSB7CiAgICAgIGlmICh0aGlzLmhlaWdodCkgewogICAgICAgIHJldHVybiBbJ292ZXJmbG93WS1hdXRvJ10KICAgICAgfQogICAgICByZXR1cm4gW107CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5jb2xXaWR0aCA9IHRoaXMuY2FsQ29sV2lkdGgoKTsKICAgIGxldCB7aGVpZ2h0OiBoZWFkZXJIZWlnaHR9ID0gdGhpcy4kcmVmcy50YWJsZUhlYWRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIGxldCB7d2lkdGg6IGJvZHlXcmFwcGVyV2lkdGh9ID0gdGhpcy4kcmVmcy50Qm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIGxldCB7d2lkdGg6IGJvZHlXaWR0aH0gPSB0aGlzLiRyZWZzLnRCb2R5VGFibGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICB0aGlzLmZpeGVkSGVhZGVyUGFkZGluZyA9IHBhcnNlSW50KGJvZHlXcmFwcGVyV2lkdGggLSBib2R5V2lkdGgpOwogICAgdGhpcy5oZWFkZXJIZWlnaHQgPSBoZWFkZXJIZWlnaHQ7CiAgICB0aGlzLm9uV2luUmVzaXplID0gKCkgPT4gdGhpcy5jYWxDb2xXaWR0aCgpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5SZXNpemUpOwogIH0sCiAgbWV0aG9kczogewogICAgY2FsQ29sV2lkdGgoKSB7CiAgICAgIGxldCB3cmFwcGVyID0gdGhpcy4kcmVmcy53cmFwcGVyOwogICAgICBsZXQge3dpZHRofSA9IHdyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICBsZXQgY29sc1dpdGhXaWR0aCA9IHRoaXMuY29sdW1ucy5maWx0ZXIoY29sID0+IGNvbC53aWR0aCk7CiAgICAgIGxldCBjb2xzV2l0aE91dFdpZHRoID0gdGhpcy5jb2x1bW5zLmZpbHRlcihjb2wgPT4gIWNvbC53aWR0aCk7CgogICAgICBsZXQgc3VtQ29sV2l0aFdpZHRoID0gY29sc1dpdGhXaWR0aC5yZWR1Y2UoKHByZXYsIGN1cikgPT4gewogICAgICAgIHJldHVybiBjdXIud2lkdGggKyBwcmV2OwogICAgICB9LCAwKTsKCiAgICAgIGxldCByZXN0V2lkdGggPSB3aWR0aCAtIHN1bUNvbFdpdGhXaWR0aDsKCiAgICAgIGxldCBwZXJDb2xXaWR0aCA9IE1hdGguZmxvb3IocmVzdFdpZHRoIC8gY29sc1dpdGhPdXRXaWR0aC5sZW5ndGgpOwogICAgICBjb25zb2xlLmxvZygncGVyQ29sV2lkdGgnLCBwZXJDb2xXaWR0aCk7CiAgICAgIHJldHVybiBwZXJDb2xXaWR0aDsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vbldpblJlc2l6ZSk7CiAgfQp9Cg=="},{"version":3,"sources":["temp-table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"temp-table.vue","sourceRoot":"src/components/table/temp","sourcesContent":["<template>\r\n    <div class=\"w-table-wrapper\" ref=\"wrapper\">\r\n        <div class=\"w-table-header\" :style=\"tHeaderStyle\" ref=\"tableHeader\">\r\n            <table class=\"w-table\" cellspacing=\"0\" cellpadding=\"0\">\r\n                <colgroup>\r\n                    <template v-for=\"col in columns\">\r\n                        <col :width=\"!!col.width?col.width:colWidth\"></col>\r\n                    </template>\r\n                </colgroup>\r\n                <thead>\r\n                <tr class=\"w-table-row\">\r\n                    <th v-for=\"col in columns\" class=\"w-table-cell\">\r\n                        {{col.text}}\r\n                    </th>\r\n                </tr>\r\n                </thead>\r\n            </table>\r\n        </div>\r\n        <div class=\"w-table-body\" :class=\"tBodyClass\" :style=\"tBodyStyle\" ref=\"tBody\">\r\n            <table class=\"w-table\" cellspacing=\"0\" cellpadding=\"0\" ref=\"tBodyTable\">\r\n                <colgroup>\r\n                    <template v-for=\"col in columns\">\r\n                        <col :width=\"!!col.width?col.width:colWidth\"></col>\r\n                    </template>\r\n                </colgroup>\r\n                <tbody>\r\n                <template v-for=\"(row,rowIndex) in data\">\r\n                    <tr class=\"w-table-row\">\r\n                        <td v-for=\"col in columns\" class=\"w-table-cell\">\r\n                            <template v-if=\"col.render\">\r\n                                <table-render :render=\"col.render\" :row=\"row\" :column=\"col\"\r\n                                              :index=\"rowIndex\"></table-render>\r\n                            </template>\r\n                            <template v-else-if=\"col.slot\">\r\n                                <slot :name=\"col.slot\" :row=\"row\" :column=\"col\" :index=\"rowIndex\"></slot>\r\n                            </template>\r\n                            <template v-else>\r\n                                {{row[col.field]}}\r\n                            </template>\r\n                        </td>\r\n                    </tr>\r\n                </template>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import TableRender from './table-render';\r\n\r\n  export default {\r\n    name: \"temp-table\",\r\n    components: {\r\n      TableRender\r\n    },\r\n    props: {\r\n      /**\r\n       * formatter:\r\n       * {\r\n       *     keyï¼Œ\r\n       *     title\r\n       * }\r\n       */\r\n      columns: {\r\n        type: Array,\r\n        default: () => []\r\n      },\r\n      data: {\r\n        type: Array,\r\n        default: () => []\r\n      },\r\n      height: {\r\n        type: String | Number\r\n      },\r\n      bordered: {\r\n        type: Boolean\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        colWidth: undefined,\r\n        fixedHeaderPadding: undefined,\r\n        headerHeight: undefined\r\n      }\r\n    },\r\n    computed: {\r\n      tBodyStyle() {\r\n        if (this.height) {\r\n          return {height: `${this.height-this.headerHeight }px`}\r\n        }\r\n        return '';\r\n      },\r\n      tHeaderStyle() {\r\n        if (this.height && this.fixedHeaderPadding > 0) {\r\n          return {paddingRight: this.fixedHeaderPadding + 'px'}\r\n        }\r\n        return '';\r\n      },\r\n      tBodyClass() {\r\n        if (this.height) {\r\n          return ['overflowY-auto']\r\n        }\r\n        return [];\r\n      }\r\n    },\r\n    mounted() {\r\n      this.colWidth = this.calColWidth();\r\n      let {height: headerHeight} = this.$refs.tableHeader.getBoundingClientRect();\r\n      let {width: bodyWrapperWidth} = this.$refs.tBody.getBoundingClientRect();\r\n      let {width: bodyWidth} = this.$refs.tBodyTable.getBoundingClientRect();\r\n      this.fixedHeaderPadding = parseInt(bodyWrapperWidth - bodyWidth);\r\n      this.headerHeight = headerHeight;\r\n      this.onWinResize = () => this.calColWidth();\r\n      window.addEventListener('resize', this.onWinResize);\r\n    },\r\n    methods: {\r\n      calColWidth() {\r\n        let wrapper = this.$refs.wrapper;\r\n        let {width} = wrapper.getBoundingClientRect();\r\n\r\n        let colsWithWidth = this.columns.filter(col => col.width);\r\n        let colsWithOutWidth = this.columns.filter(col => !col.width);\r\n\r\n        let sumColWithWidth = colsWithWidth.reduce((prev, cur) => {\r\n          return cur.width + prev;\r\n        }, 0);\r\n\r\n        let restWidth = width - sumColWithWidth;\r\n\r\n        let perColWidth = Math.floor(restWidth / colsWithOutWidth.length);\r\n        console.log('perColWidth', perColWidth);\r\n        return perColWidth;\r\n      }\r\n    },\r\n    beforeDestroy() {\r\n      window.removeEventListener('resize', this.onWinResize);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-table {\r\n        border-collapse: collapse;\r\n        border-spacing: 0;\r\n        width: 100%;\r\n        &-wrapper {\r\n            position: relative;\r\n        }\r\n        &-header {\r\n            background-color: #f8f8f9;\r\n            &-fixed {\r\n                padding-right: 12px;\r\n            }\r\n        }\r\n        &-body {\r\n\r\n        }\r\n        &-cell {\r\n            text-align: left;\r\n            border-bottom: 1px solid #e8eaec;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            padding: 8px;\r\n        }\r\n    }\r\n\r\n    .overflowY-auto {\r\n        overflow-y: auto;\r\n    }\r\n</style>"]}]}