{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\table\\src\\table.vue?vue&type=style&index=0&id=508bc7fc&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\table\\src\\table.vue","mtime":1581316960459},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudy10YWJsZS13cmFwcGVyIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIC8qb3ZlcmZsb3c6IGF1dG87Ki8KICAgIC53LXRhYmxlIHsKICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwogICAgICAgIGJvcmRlci1zcGFjaW5nOiAwOwogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIC53LXRhYmxlLWNlbnRlcnsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7CiAgICAgICAgfQogICAgICAgICYuYm9yZGVyZWQgewogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjOTk5OTk5OwogICAgICAgICAgICB0aCwgdGQgewogICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTk5OTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAmLmNvbXBhY3QgewogICAgICAgICAgICB0aCwgdGQgewogICAgICAgICAgICAgICAgcGFkZGluZzogNHB4OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICYuc3RyaXBlZCB7CiAgICAgICAgICAgIHRib2R5IHsKICAgICAgICAgICAgICAgIHRyIHsKICAgICAgICAgICAgICAgICAgICAmOm50aC1jaGlsZChvZGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJjpudGgtY2hpbGQoZXZlbikgewogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTNlNGU1OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAmLWhlYWRlciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgfQogICAgICAgICYtc29ydGVyIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBtYXJnaW46IDAgNHB4OwogICAgICAgICAgICBzdmcgewogICAgICAgICAgICAgICAgd2lkdGg6IDhweDsKICAgICAgICAgICAgICAgIGhlaWdodDogOHB4OwogICAgICAgICAgICAgICAgZmlsbDogZ3JleTsKICAgICAgICAgICAgfQogICAgICAgICAgICAuc29ydGVyIHsKICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgICY6aG92ZXIgewogICAgICAgICAgICAgICAgICAgIGZpbGw6IGRhcmtlbihncmV5LCAzMCUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJi5hY3RpdmUgewogICAgICAgICAgICAgICAgICAgIGZpbGw6IGJsYWNrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICYtbG9hZGluZyB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBib3R0b206IDA7CiAgICAgICAgICAgIHJpZ2h0OiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICAubG9hZGluZyB7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwcHg7CiAgICAgICAgICAgICAgICB3aWR0aDogMzBweDsKICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAzcyBsaW5lYXIgaW5maW5pdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLndpdGhvdXQtZGF0YSB7CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggIWltcG9ydGFudDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyICFpbXBvcnRhbnQ7CiAgICAgICAgfQoKICAgICAgICB0aCwgdGQgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgfQogICAgICAgICYtY29weSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgcmlnaHQ6IDA7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICB9CiAgICB9Cn0KCkBrZXlmcmFtZXMgc3BpbiB7CiAgICBmcm9tIHsKICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsKICAgIH0KICAgIHRvIHsKICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogICAgfQp9Cg=="},{"version":3,"sources":["table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"table.vue","sourceRoot":"src/components/table/src","sourcesContent":["<template>\r\n    <div class=\"w-table-wrapper\" ref=\"wrapper\">\r\n        <div :style=\"{height:height+'px',overflow:'auto'}\" ref='scrollView'>\r\n            <table class=\"w-table\" :class=\"{bordered,compact,striped}\" ref=\"table\">\r\n                <thead>\r\n                <tr>\r\n                    <th style=\"width: 50px\"></th>\r\n                    <th style=\"width: 50px\" v-if=\"showIndex\">#</th>\r\n                    <th style=\"width: 50px\" v-if=\"selectable\" class=\"w-table-center\">\r\n                        <input type=\"checkbox\"\r\n                               @change=\"onChangeAllItems\"\r\n                               ref=\"allCheckBox\"\r\n                               :checked=\"areAllItemsSelected\"\r\n                        />\r\n                    </th>\r\n                    <th v-for=\"column in columns\" :key=\"column.field\" :style=\"{width:column.width+'px'}\">\r\n                        <div class=\"w-table-header\">\r\n                            <span>{{column.text}}</span>\r\n                            <div class=\"w-table-sorter\" v-if=\"column.sortable\">\r\n                                <w-icon :class=\"['sorter','sorter-asc',sortedField.field === column.field && sortedField.type==='asc' && 'active']\"\r\n                                        name=\"asc\"\r\n                                        @click=\"ascOrder(column.field)\"></w-icon>\r\n                                <w-icon :class=\"['sorter','sorter-desc',sortedField.field === column.field && sortedField.type==='desc' && 'active']\"\r\n                                        name=\"desc\"\r\n                                        @click=\"descOrder(column.field)\"></w-icon>\r\n                            </div>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n                </thead>\r\n                <tbody v-if=\"dataSource.length > 0\">\r\n                <template v-for=\"(data,index) in dataSource\">\r\n                    <tr :key=\"data.id\">\r\n                        <th style=\"width: 50px\" class=\"w-table-center\">\r\n                            <w-icon name=\"next\" @click=\"toggleExpand(data.id)\"></w-icon>\r\n                        </th>\r\n                        <td style=\"width: 50px\" v-if=\"showIndex\">{{index+1}}</td>\r\n                        <td style=\"width: 50px\" v-if=\"selectable\" class=\"w-table-center\">\r\n                            <input type=\"checkbox\"\r\n                                   :checked=\"isChecked(data)\"\r\n                                   @change=\"handleSelect(data,index,$event)\"\r\n                            />\r\n                        </td>\r\n                        <template v-for=\"column in columns\">\r\n                            <td :key=\"column.field\" :style=\"{width:column.width+'px'}\">{{data[column.field]}}</td>\r\n                        </template>\r\n                    </tr>\r\n                    <tr v-if=\"inExpandIds(data.id)\">\r\n                        <td colspan=\"100\">{{data.description || 'xxxx'}}</td>\r\n                    </tr>\r\n                </template>\r\n                </tbody>\r\n                <tbody v-else>\r\n                <tr>\r\n                    <td class=\"without-data\" :colspan=\"colspan\">{{tipsWithNoData}}</td>\r\n                </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <!--<div :style=\"{height:height+'px',overflow: 'auto'}\">-->\r\n        <!---->\r\n        <!--</div>-->\r\n        <w-pagination :total=\"dataSource.length\"></w-pagination>\r\n        <div class=\"w-table-loading\" v-if=\"loading\">\r\n            <w-icon name=\"loading\" class=\"loading\"></w-icon>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WTable\",\r\n    props: {\r\n      columns: { // 表头的每一列\r\n        type: Array,\r\n        required: true\r\n      },\r\n      dataSource: { // 每一行的数据\r\n        type: Array,\r\n        required: true,\r\n        validator: (array) => {\r\n          return array.every(item => item.id !== undefined);\r\n        }\r\n      },\r\n      showIndex: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      bordered: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      compact: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      striped: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      selectedItems: {\r\n        type: Array,\r\n        default: () => []\r\n      },\r\n      loading: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      tipsWithNoData: {\r\n        type: String,\r\n        default: '没有数据可展示'\r\n      },\r\n      selectable: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      height: {\r\n        type: Number | String\r\n      },\r\n      expandable:{\r\n        type:Boolean\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        sortedField: {\r\n          field: undefined,\r\n          type: undefined\r\n        },\r\n        copyTable: undefined,\r\n        expandIds:[]\r\n      }\r\n    },\r\n    computed: {\r\n      colspan() {\r\n        let count = 0;\r\n        if (this.showIndex) count++;\r\n        if (this.selectable) count++;\r\n        return this.columns.length + count;\r\n      },\r\n      areAllItemsSelected() {\r\n        const a = this.dataSource.map(item => item.id).sort();\r\n        const b = this.selectedItems.map(item => item.id).sort();\r\n        if (a.length === b.length) {\r\n          let equals = true;\r\n          for (let i = 0; i < a.length; i++) {\r\n            if (a[i] !== b[i]) {\r\n              equals = false;\r\n              break;\r\n            }\r\n          }\r\n          return equals;\r\n        }\r\n        return false;\r\n      }\r\n    },\r\n    watch: {\r\n      selectedItems() {\r\n        if (this.selectedItems.length === this.dataSource.length || this.selectedItems.length === 0) {\r\n          this.$refs.allCheckBox.indeterminate = false;\r\n        } else {\r\n          this.$refs.allCheckBox.indeterminate = true;\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      inExpandIds(id){\r\n        return this.expandIds.indexOf(id)>=0;\r\n      },\r\n      toggleExpand(id){\r\n        if (!this.inExpandIds(id)){\r\n          this.expandIds.push(id);\r\n        } else {\r\n          this.expandIds.splice(this.expandIds.indexOf(id),1);\r\n        }\r\n      },\r\n      handleSelect(item, index, evt) {\r\n        let selected = evt.target.checked;\r\n        let copy = JSON.parse(JSON.stringify(this.selectedItems));\r\n        if (selected) {\r\n          copy.push(item);\r\n        } else {\r\n          copy = copy.filter(i => i.id !== item.id);\r\n        }\r\n        this.$emit('update:selectedItems', copy)\r\n      },\r\n      onChangeAllItems(evt) {\r\n        let selected = evt.target.checked;\r\n        if (selected) {\r\n          this.$emit('update:selectedItems', this.dataSource)\r\n        } else {\r\n          this.$emit('update:selectedItems', [])\r\n        }\r\n      },\r\n      isChecked(item) {\r\n        return this.selectedItems.filter(i => i.id === item.id).length > 0\r\n      },\r\n      areSameArray(arr1, arr2, property) {\r\n\r\n      },\r\n      ascOrder(field) {\r\n        this.sortedField = {\r\n          field,\r\n          type: 'asc'\r\n        };\r\n        let copyCol = JSON.parse(JSON.stringify((this.columns.filter(i => i.field === field)[0])));\r\n        this.$emit('on-sort-change', {column: copyCol, field, order: 'asc'})\r\n      },\r\n      descOrder(field) {\r\n        this.sortedField = {\r\n          field,\r\n          type: 'desc'\r\n        };\r\n        let copyCol = JSON.parse(JSON.stringify((this.columns.filter(i => i.field === field)[0])));\r\n        this.$emit('on-sort-change', {column: copyCol, field, order: 'desc'})\r\n      },\r\n      // updateHeaderWidth(){\r\n      //   let tableHeaderCopy = null;\r\n      //   this.copyTable.classList.add('w-table-copy');\r\n      //   Array.from(this.copyTable.children).map(item => {\r\n      //     if (item.tagName.toLowerCase() !== 'thead') {\r\n      //       item.remove()\r\n      //     } else {\r\n      //       tableHeaderCopy = item;\r\n      //     }\r\n      //   });\r\n      // }\r\n    },\r\n    mounted() {\r\n      // 固定表头\r\n      let copyTable = this.$refs.table.cloneNode(false);\r\n      this.copyTable = copyTable;\r\n      this.copyTable.classList.add('w-table-copy');\r\n      let wrapper = this.$refs.wrapper;\r\n      let tHead = this.$refs.table.children[0];\r\n      let {height} = tHead.getBoundingClientRect();\r\n      this.$refs.scrollView.style.marginTop = height + 'px';\r\n      copyTable.appendChild(tHead);\r\n      wrapper.appendChild(copyTable);\r\n      // this.updateHeaderWidth();\r\n      // this.onWindowResize = ()=>this.updateHeaderWidth();\r\n      // window.addEventListener('resize',this.onWindowResize)\r\n    },\r\n    beforeDestroy() {\r\n      // window.removeEventListener('resize',this.onWindowResize);\r\n      this.copyTable.remove();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-table-wrapper {\r\n        position: relative;\r\n        /*overflow: auto;*/\r\n        .w-table {\r\n            border-collapse: collapse;\r\n            border-spacing: 0;\r\n            width: 100%;\r\n            .w-table-center{\r\n                text-align: center !important;\r\n            }\r\n            &.bordered {\r\n                border: 1px solid #999999;\r\n                th, td {\r\n                    border: 1px solid #999999;\r\n                }\r\n            }\r\n            &.compact {\r\n                th, td {\r\n                    padding: 4px;\r\n                }\r\n            }\r\n            &.striped {\r\n                tbody {\r\n                    tr {\r\n                        &:nth-child(odd) {\r\n                            background-color: #fff;\r\n                        }\r\n                        &:nth-child(even) {\r\n                            background-color: #e3e4e5;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            &-header {\r\n                display: flex;\r\n                align-items: center;\r\n            }\r\n            &-sorter {\r\n                display: inline-flex;\r\n                flex-direction: column;\r\n                justify-content: center;\r\n                align-items: center;\r\n                margin: 0 4px;\r\n                svg {\r\n                    width: 8px;\r\n                    height: 8px;\r\n                    fill: grey;\r\n                }\r\n                .sorter {\r\n                    cursor: pointer;\r\n                    &:hover {\r\n                        fill: darken(grey, 30%);\r\n                    }\r\n                    &.active {\r\n                        fill: black;\r\n                    }\r\n                }\r\n            }\r\n            &-loading {\r\n                position: absolute;\r\n                left: 0;\r\n                top: 0;\r\n                bottom: 0;\r\n                right: 0;\r\n                background-color: rgba(0, 0, 0, 0.2);\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                .loading {\r\n                    height: 30px;\r\n                    width: 30px;\r\n                    animation: spin 3s linear infinite;\r\n                }\r\n            }\r\n            .without-data {\r\n                padding: 20px !important;\r\n                text-align: center !important;\r\n            }\r\n\r\n            th, td {\r\n                text-align: left;\r\n                padding: 8px;\r\n            }\r\n            &-copy {\r\n                position: absolute;\r\n                left: 0;\r\n                right: 0;\r\n                top: 0;\r\n                background-color: #fff;\r\n            }\r\n        }\r\n    }\r\n\r\n    @keyframes spin {\r\n        from {\r\n            transform: rotate(0deg);\r\n        }\r\n        to {\r\n            transform: rotate(360deg);\r\n        }\r\n    }\r\n</style>"]}]}