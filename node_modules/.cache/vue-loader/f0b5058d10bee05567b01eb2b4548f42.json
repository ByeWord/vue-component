{"remainingRequest":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\slides\\src\\slides.vue?vue&type=style&index=0&id=73681dda&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\src\\components\\slides\\src\\slides.vue","mtime":1580794280479},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WeChain\\Documents\\Programs\\Vue\\vue-component\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi53LXNsaWRlcyB7CiAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjazsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICYtd2luZG93IHsKICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgfQogICAgJi13cmFwcGVyIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB9CiAgICAmLWRvdHMgewogICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgbWFyZ2luOiAwOwogICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIGJvcmRlci1ib3R0b206IDA7CiAgICAgICAgbGVmdDogNTAlOwogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgIH0KICAgICYtZG90IHsKICAgICAgICBoZWlnaHQ6IDE2cHg7CiAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgbGluZS1oZWlnaHQ6IDE2cHg7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjY2NjOwogICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC44cyBlYXNlLWluLW91dDsKICAgICAgICAmLmFjdGl2ZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGNyaW1zb247CiAgICAgICAgfQogICAgICAgICY6aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBjcmltc29uOwogICAgICAgIH0KICAgICAgICAmOm5vdCg6bGFzdC1jaGlsZCkgewogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEycHg7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["slides.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slides.vue","sourceRoot":"src/components/slides/src","sourcesContent":["<template>\r\n    <div class=\"w-slides\">\r\n        <div\r\n                class=\"w-slides-window\"\r\n                ref=\"window\"\r\n                @touchstart=\"onTouchStart\"\r\n                @touchmove=\"onTouchMove\"\r\n                @touchend=\"onTouchEnd\"\r\n        >\r\n            <div class=\"w-slides-wrapper\">\r\n                <slot></slot>\r\n            </div>\r\n        </div>\r\n        <ul class=\"w-slides-dots\">\r\n            <li class=\"w-slides-dot\" :class=\"{active:selectedIndex===(n-1)}\" v-for=\"n in dotsCount\" :key=\"n\"\r\n                @click=\"switchTo(n-1)\"\r\n                @mouseenter=\"pause\"\r\n                @mouseleave=\"onMouseLeave\"\r\n            >\r\n                {{n}}\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"WSlides\",\r\n    props: {\r\n      selected: {\r\n        type: String,\r\n      },\r\n      autoPlay: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        dotsCount: 0,\r\n        lastSelectedIndex: undefined,\r\n        timeId: null\r\n      }\r\n    },\r\n    mounted() {\r\n      this.updateChildren();\r\n      console.log(this.$children)\r\n      this.autoPlay && this.playAutomatically();\r\n      this.dotsCount = this.$children.length;\r\n    },\r\n    updated() {\r\n      this.updateChildren();\r\n    },\r\n    computed: {\r\n      names() {\r\n        return this.$children.map(child => child.name);\r\n      },\r\n      selectedIndex() {\r\n        let index = this.names.indexOf(this.selected);\r\n        return index === -1 ? 0 : index;\r\n      }\r\n    },\r\n    methods: {\r\n      onTouchStart(e) {\r\n        if (e.touches.length > 1) return;\r\n        this.pause();\r\n      },\r\n      onTouchMove(e) {\r\n        console.log('onTouchMove')\r\n      },\r\n      onTouchEnd(e) {\r\n        let endTouch = e.changedTouches[0];\r\n        console.log(endTouch)\r\n      },\r\n      updateChildren() { // 核心更新方法\r\n        let selected = this.getSelected(); // 获取更新后的selected\r\n        this.$children.forEach(vm => {\r\n          // Vue的异步更新，导致dom操作reverse类更新不及时\r\n          let reverse = this.selectedIndex <= this.lastSelectedIndex;\r\n          if (this.timeId) {\r\n            if (this.lastSelectedIndex === this.$children.length - 1) {\r\n              reverse = false;\r\n            }\r\n          }\r\n          vm.reverse = reverse;\r\n          this.$nextTick(() => {\r\n            vm.selected = selected;\r\n          });\r\n        });\r\n      },\r\n      getSelected() {\r\n        let first = this.$children[0];\r\n        return this.selected || first.name;\r\n      },\r\n      onMouseLeave() {\r\n        if (!this.timeId) { //为了防止timeId被重复播放\r\n          this.playAutomatically();\r\n        }\r\n      },\r\n      playAutomatically() {\r\n        let play = () => {\r\n          let index = this.names.indexOf(this.getSelected());\r\n          index = (++index) % this.names.length; // 正向\r\n          this.switchTo(index);\r\n          this.timeId = setTimeout(play, 5000)\r\n        };\r\n        play();\r\n      },\r\n      pause() {\r\n        this.timeId && window.clearTimeout(this.timeId);\r\n        this.timeId = null;\r\n      },\r\n      switchTo(index) {\r\n        this.lastSelectedIndex = this.selectedIndex;\r\n        this.$emit('update:selected', this.names[index]);\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .w-slides {\r\n        border: 1px solid black;\r\n        position: relative;\r\n        &-window {\r\n            overflow: hidden;\r\n        }\r\n        &-wrapper {\r\n            position: relative;\r\n        }\r\n        &-dots {\r\n            padding: 0;\r\n            margin: 0;\r\n            list-style: none;\r\n            position: absolute;\r\n            border-bottom: 0;\r\n            left: 50%;\r\n            transform: translateX(-50%);\r\n        }\r\n        &-dot {\r\n            height: 16px;\r\n            width: 16px;\r\n            font-size: 12px;\r\n            cursor: pointer;\r\n            display: inline-block;\r\n            line-height: 16px;\r\n            text-align: center;\r\n            border-radius: 50%;\r\n            background-color: #cccccc;\r\n            transition: background-color 0.8s ease-in-out;\r\n            &.active {\r\n                background-color: crimson;\r\n            }\r\n            &:hover {\r\n                background-color: crimson;\r\n            }\r\n            &:not(:last-child) {\r\n                margin-right: 12px;\r\n            }\r\n        }\r\n    }\r\n</style>"]}]}